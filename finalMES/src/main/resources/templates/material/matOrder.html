<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>발주 관리 ^^</title>
<style>
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
	<section layout:fragment="content">
		<div class=""></div>
		<h1>발주 관리</h1>
		<div>

			<div class="modal fade modal-xl" id="exampleModal" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">발주 등록</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<table class="table">
								<thead>
									<tr>
										<th>발주 코드</th>
										<td><input type="text"></td>
										<th>발주 명</th>
										<td><input type="text"></td>
										<td></td>
										<td></td>
									</tr>
									<tr>
										<th>자재 코드</th>
										<td><input type="text"></td>
										<th>거래처 명</th>
										<td><input type="text"></td>
										<td></td>
										<td></td>
									</tr>
									<tr>
										<th>수량</th>
										<td><input type="number"></td>
										<th>발주일</th>
										<td><input type="date"></td>
										<th>담당자</th>
										<td><input class="readInput" type="text"></td>
										<td></td>
									</tr>
								</thead>
							</table>
							<button>초기화</button>
							<div id="grid2"></div>
						</div>




						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">닫기</button>
							<button type="button" class="btn btn-primary">작성완료</button>
						</div>
					</div>
				</div>
			</div>
			<button class="btn btn-primary" data-bs-toggle="modal"
				data-bs-target="#exampleModal">등록</button>


			<!-- Modal -->
			<!-- ManagerListModal -->
			<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
				data-bs-keyboard="false" tabindex="-1"
				aria-labelledby="staticBackdropLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h1 class="modal-title fs-5" id="staticBackdropLabel">주문 담당자
								목록</h1>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<ul>
								<li th:each="mat : ${list}" th:text="${mat.matOrCode}"></li>
							</ul>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary">Understood</button>
						</div>
					</div>
				</div>
			</div>

		</div>



		<div id="grid"></div>
		<script th:inline="javascript">
			function sortTableByOrderCode() {
				var table, rows, switching, i, x, y, shouldSwitch;
				table = document.getElementById("orderTable");
				switching = true;
				while (switching) {
					switching = false;
					rows = table.getElementsByTagName("tr");
					for (i = 1; i < (rows.length - 1); i++) {
						shouldSwitch = false;
						x = rows[i].getElementsByTagName("td")[1];
						y = rows[i + 1].getElementsByTagName("td")[1];
						if (x.innerHTML.toLowerCase() > y.innerHTML
								.toLowerCase()) {
							shouldSwitch = true;
							break;
						}
					}
					if (shouldSwitch) {
						rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
						switching = true;
					}
				}
			}

			$(document).ready(
					function() {
						window.toggleCheckboxes = function() {
							// #selectAllCheckbox 체크박스의 상태 가져오기
							var isChecked = $("#selectAllCheckbox").prop(
									"checked");

							// 모든 체크박스의 상태를 변경
							$(".moreInfo input[type='checkbox']").prop(
									"checked", isChecked);
						}
					});
			
			 let order = [[${list}]]
			
			 const grid = new tui.Grid({
		            el: document.getElementById('grid'),
		            data: order, // 여기서 emps 데이터를 사용
		            scrollX: false,
		            scrollY: false,
			      columns: [
			        {
			          header: '발주코드',
			          name: 'matOrCode'
			        },
			        {
			          header: '발주명',
			          name: 'matOrName'
			        },
			        {
			          header: '자재코드',
			          name: 'matCode'
			        },
			        {
			          header: '거래처명',
			          name: 'busineesName'
			        },
			        {
			          header: '수량',
			          name: 'matOrCount'
			        },
			        {
				      header: '발주일',
				      name: 'matOrDate',
				      formatter: function(value) {
				    	    // 원하는 날짜 포맷으로 데이터 포맷 처리
				    	    const date = new Date(value);
				    	    return date.toLocaleDateString('yyyy-MM-dd'); // 예시: 한국식 날짜 포맷으로 변경
				    	  }
				    },
				    {
				      header: '납기일',
				      name: 'matOrDueDate',
				    },
				    {
				      header: '담당자',
				      name: 'matOrManager'
				    }
			      ],
			      rowHeaders: ['rowNum'],
		            pageOptions: {
		                useClient: true,
		                perPage: 5
		            }
			    });
				
			 const grid2 = new tui.Grid({
		            el: document.getElementById('grid2'),
		            data: order, // 여기서 emps 데이터를 사용
		            scrollX: true,
		            scrollY: true,
			      columns: [
			        {
			          header: '발주코드',
			          name: 'matOrCode'
			        },
			        {
			          header: '발주명',
			          name: 'matOrName'
			        },
			        {
			          header: '자재코드',
			          name: 'matCode'
			        },
			        {
			          header: '거래처명',
			          name: 'busineesName'
			        },
			        {
			          header: '수량',
			          name: 'matOrCount'
			        },
			        {
				      header: '발주일',
				      name: 'matOrDate',
				    },
				    {
				      header: '납기일',
				      name: 'matOrDueDate',
				    },
				    {
				      header: '담당자',
				      name: 'matOrManager'
				    }
			      ],
			      rowHeaders: ['rowNum'],
		            pageOptions: {
		                useClient: true,
		                perPage: 5
		            }
			    });
		</script>
	</section>
</body>
</html>