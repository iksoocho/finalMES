<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.produce.mapper.PlanMapper">
	
	<!-- plan list -->
	<select id="selectPlanList" resultType="PlanVO">
		SELECT *
		FROM prod_plan
	</select>
	
	<!-- plan detail list -->
	<select id="selectPlanDList" resultType="PlanDVO">
		SELECT DISTINCT pdp.*, oddl.dlvy_date, pl.prod_count
		FROM prod_d_plan pdp
		LEFT JOIN prod_plan pp ON pdp.plan_code = pp.plan_code
		LEFT JOIN ord_list ol ON pp.ord_code = ol.ord_code
		LEFT JOIN ord_d_list oddl ON ol.ord_code = oddl.ord_code
		LEFT JOIN prod_lot pl ON pdp.prod_code = pl.prod_code
		WHERE pdp.plan_code = #{planCode}  
	</select>
	
	<!-- order list -->
	<select id="selectOrdList" resultType="PlanOrdVO">
		SELECT *
		FROM ord_list
		  
	</select>
	
	<!-- order detail list -->
	<select id="selectOrdDList" resultType="PlanOrdDVO">
		SELECT *
		FROM ord_d_list
		WHERE ord_code = #{ordCode}  
	</select>
	
	
	
</mapper>